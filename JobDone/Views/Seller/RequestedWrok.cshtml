@{
    Layout = "~/Views/Shared/_SellerLayout.cshtml";
}
@using JobDone.Models.SellerAcceptRequest
@model SellerViewModel;

<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
    /* تخصيص الزر */
    .my-button {
        display: inline-block;
        padding: 10px 20px;
        background-color: #ecad34;
        color: #ffffff;
        border: 1px;
        border-radius: 5px;
        font-size: 16px;
        cursor: pointer;
        transition: background-color 0.3s ease, transform 0.2s ease;
        position: relative;
        overflow: hidden;
    }

        /* تأثير hover */
        .my-button:hover {
            background-color: #2980b9;
            transform: scale(1.05); /* تكبير الزر عند المرور بالماوس */
        }

        /* تأثير animation عند النقر */
        .my-button:active {
            transform: scale(0.95);
        }

        /* تأثير ظل الزر */
        .my-button::before {
            content: "";
            position: absolute;
            top: 100%;
            left: 0;
            width: 100%;
            height: 3px;
            background-color: rgba(0, 0, 0, 0.3);
            transform: scaleX(0);
            transform-origin: right;
            transition: transform 0.3s ease;
        }

        /* تأثير ظل الزر عند النقر */
        .my-button:active::before {
            transform: scaleX(1);
            transform-origin: left;
        }

        /* تأثير تغيير اللون */
        .my-button::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.2);
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        /* تأثير تغيير اللون عند النقر */
        .my-button:active::after {
            opacity: 1;
        }

        .get-started-btn {
  color: black;
  border-radius: 4px;
  padding: 7px 25px 8px 25px;
  white-space: nowrap;
  transition: 0.3s;
  font-size: 14px;
  display: inline-block;
  border: 2px solid #ffc451;
}

.get-started-btn:hover {
  background: #ffbb38;
  color: #343a40;
}

@@media (max-width: 992px) {
  .get-started-btn {
    padding: 7px 20px 8px 20px;
    margin-right: 15px;
  }
}
</style>


<div class="container" style="margin-top: 100px;">
    
    <h1>Search Results</h1>

    <div class="row mb-4">
        <form class="d-flex" method="post" asp-action="RequestedWrok">
            <div class="col-md-7">
                <input name="search" class="get-started-btn" style="width:750px;" type="search" placeholder="Search" aria-label="Search">
            </div>
            
                <button class="get-started-btn"  type="submit">
                <h7>
                    <i class="fas fa-search"></i> Search
                </h7>
            </button>
        </form>
    </div>
        <div class="row">
        @{
            List<int> ids = Model.SellerAcceptedRequestsId.ToList();
        }
            
                @if (Model.orderByCustomerModels.Count() == 0)
                {
                    <h3 style="color:red">Nothing here</h3>
                }
                @foreach (var item in Model.orderByCustomerModels)
                {
                    if((item.DeliverDate) > DateOnly.FromDateTime(DateTime.Now.AddDays(1)))
                    {
                        if(!ids.Contains(item.Id))
                        {
                            <div class="col-md-4" style="width:25%;">
                                <div class="card mb-4">
                                    @{
                                        string base64Image = Convert.ToBase64String(item.CustomerIdFkNavigation.ProfilePicture);
                                    }
                                    <div class="image-container d-flex align-items-center justify-content-center" style="margin-top:5px">
                                        <img src="data:image/jpeg;base64,@base64Image" alt="Profile Picture" class="rounded-circle" width="120">
                                    </div>
                                    <div class="card-body">
                                        <h4 class="text-center">@item.OrderName</h4>
                                        <h6 class="text-center">@item.CustomerIdFkNavigation.Username</h6>

                                        <spna style=" font-size: 18px;">description : </spna>
                                        <p>@item.Description </p>

                                        <span>Order Date : @item.OrderDate</span>
                                        <p>  delivery date :@item.DeliverDate </p>

                                        <p style="color:green; font-size: 18px;">
                                            <form action="AcceptRequestedWrok" method="post">$@Math.Round(item.Price, 2)
                                               <br />
                                             <button type="submit" class="get-started-btn" style="float: right ; margin-left:12px;" name="Accept" value="@item.Id">Accept</button>
                                            </form>
                                                
                                            <form asp-controller="SellerOrder" asp-action="Chat" method="get" style="display:contents">
                                                <input type="hidden" name="customerId" value="@item.CustomerIdFk" />
                                                <input type="hidden" name="sellerId" value="@ViewBag.sellerId" />
                                        <button type="submit" class="get-started-btn" style="float:right; ">Massege </button>
                                            </form>   
                                        </p>

                                    </div>
                                </div>
                            </div>
                        }
                
                    }
               
                }         
        </div>
    </div>
</div>